<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8"><title>Simple DOT Proof | Artifact Guide</title><style></style>
        <style type="text/css">
         .tg  {border-collapse:collapse;border-spacing:0;border-color:#ccc;}
         .tg td{font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:0px;overflow:hidden;word-break:normal;border-color:#ccc;color:#333;background-color:#fff;border-top-width:1px;border-bottom-width:1px;}
         .tg th{font-family:Arial, sans-serif;font-size:14px;font-weight:normal;padding:10px 5px;border-style:solid;border-width:0px;overflow:hidden;word-break:normal;border-color:#ccc;color:#333;background-color:#f0f0f0;border-top-width:1px;border-bottom-width:1px;}
         .tg .tg-bq60{font-weight:bold;font-size:100%;font-family:Arial, Helvetica, sans-serif !important;;vertical-align:top}
         .tg .tg-rkwu{font-family:"Courier New", Courier, monospace !important;;vertical-align:top}
         .tg .tg-8fc1{font-weight:bold;font-family:Arial, Helvetica, sans-serif !important;;vertical-align:top}
         .tg .tg-yw4l{vertical-align:top}
        </style>
        <link href="doc/assets/resources/coqdoc.css" rel="stylesheet" type="text/css" />
        <link href="doc/assets/resources/coqdocjs.css" rel="stylesheet" type="text/css"/>
    </head>
    <body id="preview" class="readme">
        <div id="header">
            <span class="left">
                <span class="modulename"> README </span>
            </span>

            <span class="right">
                <a href="./README.html">README</a>
                <a href="./doc/indexpage.html"> Index </a>
                <a href="./doc/toc.html"> Table of Contents </a>
            </span>
        </div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
        <h1><a id="A_Simple_Soundness_Proof_for_Dependent_Object_Types_0"></a>A Simple Soundness Proof for<br>Dependent Object Types</h1>
        <h2><a id="Artifact_2"></a>Artifact Guide</h2>
        <p>Our <a href="paper.pdf">paper</a> presents a simplified type-safety proof for the
            <a href="https://infoscience.epfl.ch/record/215280">version of DOT</a>
            presented at Wadlerfest 2016.
            This artifact contains a formalization of the simple proof in Coq.
            The definitions of the abstract syntax and several lemmas are based on the
            <a href="https://github.com/samuelgruetter/dot-calculus/blob/master/dev/lf/dot_top_bot.v">original</a>
            Coq proof that comes with Wadlerfest DOT paper.</p>
        <h3><a id="Getting_Started_12"></a>Getting Started</h3>
        <p>
            We provide a VirtualBox VM which comes with all the required
            software and include all proof scripts.

            You may download virtual box from <a href="https://www.virtualbox.org/">virtualbox.org</a>.

            You may also choose to use your own system with <code>coq 8.6</code>.
        </p>
        <div>
            <h3>Requirements</h3>
            <p>
                To compile the proof, we require <code>coq 8.6</code> and related tooling
                to be run in a unix-like environment. In particular we require
                the following tools (all version 8.6) in the <code>PATH</code>
                enviroment variable:
                <ul>
                    <li><code>coqc</code></li>
                    <li><code>coqtop</code></li>
                    <li><code>coqdep</code></li>
                    <li><code>coqdoc</code></li>
                    <li><code>coqmakefile</code></li>
                </ul>

                Other requirements are.
                <ul>
                    <li><code>make</code></li>
                    <li><code>unzip</code></li>
                </ul>
            </p>
        </div>
        <h3><a id="StepbyStep_Instructions_16"></a>Step-by-Step Instructions</h3>
        <h4>VirtualBox intructions</h4>
        <p>
            To use the VM, start up <code>VirtualBox</code> and select <code>New
            VM</code> and add a new Linux (Ubuntu 64-bit) machine with the
            provided <code>.vdi</code> file as the harddisk. Then start the
            VM. You will find the directory containing this
            <code>README.html</code> file and the artifact in the Desktop. The
            links in this file assume that you are reading this file from the
            directory you will compiling from. You may open this file from the
            VM using Firefox. For IDE options for <code>coq</code> the VM comes
            preinstalled with the <code>Proof General</code> Emacs interface.
        </p>
        <h4>Compiling the proof</h4>
        <p>
            To compile the proof, navigate to the artifact directory from a
            terminal window and run <code>make</code> to compile the
            proof. <code>make</code> will do the following:
            <ul>
                <li>Compile the <code>tlc</code> library. (precompiled on the VM)</li>
                <li>Compile the safety proof.</li>
                <li>Generate documentation.</li>
            </ul>

            A successful compilation indicates a correct proof.
        </p>
        <h4>Inspecting Source files</h4>
        <p>
            The documentation can be found at the <a
            href="./doc/toc.html"><code>Table of Contents</code></a>. This page
            lists links to pretty printed <code>coq</code> source files, but the
            raw <code>.v</code> files can be found in the <a
            href="./proof/"><code>proof/</code></a> directory. In the pretty
            printed versions, the proof scripts are hidden by default, you may
            click on Show Proofs at the top of the page to display all the
            proof, or click under Lemma/Theorem statements to display their
            proofs.
        </p>
        <h3><a id="Description_of_the_Artifact_20"></a>Description of the Artifact</h3>
        <p>This artifact presents a Coq formalization of the DOT calculus and DOT's type safety proof
            using the method presented in the paper. The type-safety proof can
            be found in <a href="./doc/Safety.html">Safety.v</a>.</p>
        <p>Below, we present a table that shows how the definitions and lemmas in the paper correspond
            to the artifact. However, before comparing the correspondence, we recommend reading
            through <a href="./doc/Definitions.html"><a href="doc/Definitions.html">Definitions.v</a></a>. That file
            not only presents the definitions of the abstract syntax and type
            system of DOT, but also presents most tactics, functions, and
          inductive definitions that are used in the proof.</p>

        <h3>Proof Structure</h3>
        The Coq proof is split up into the following modules:
        <ul>
          <li><a href="doc/Definitions.html">Definitions.v</a>:
            The main inductive definitions and functions that are used in the proof.
            Defines the abstract syntax, type system, evaluation semantics of DOT, as well as
            definitions used in the proof: inert types, tight, invertible, and precise typing relations.
          </li>
          <li><a href="doc/Weakening.html">Weakening.v</a>:
            Proves the Weakening Lemma.
          </li>
          <li><a href="doc/Narrowing.html">Narrowing.v</a>:
            Proves the Narrowing Lemma.
          </li>
          <li><a href="doc/Substitution.html">Substitution.v</a>:
            Proves the Substitution Lemma.
          </li>
          <li><a href="doc/Precise_types.html">Precise_types.v</a>:
            Proves lemmas related to precise typing. In particliar, reasons about the possible
            precise types that a variable can have in an inert environment.
          </li>
          <li><a href="doc/General_to_tight.html">General_to_tight.v</a>:
            Proves that in an inert context, general typing implies tight typing.
          </li>
          <li><a href="doc/Invertible_typing.html">Invertible_typing.v</a>:
            Proves that in an inert context, tight typing implies invertible typing (both for variables and values).
          </li>
          <li><a href="doc/Helper_lemmas.html">Helper_lemmas.v</a>:
            Various helper lemmas used throughout the proof.
          </li>
          <li><a href="doc/Canonical_forms.html">Canonical_forms.v</a>:
            Proves the Canonical Forms Lemmas for functions and objects.
          </li>
          <li><a href="doc/Safety.html">Safety.v</a>:
            Proves the Progress and Preservation Theorems.
          </li>
        </ul>
        <p>The following figure shows a dependency graph between the Coq modules.</p>
        <p><center><img src=doc/graph.png width=400></center></p>

        <h3><a id="PaperArtifact_Correspondence_37"></a>Paper-Artifact Correspondence</h3>

        <table class="tg">
            <tr>
                <th class="tg-bq60" colspan="3">Paper<br></th>
                <th class="tg-8fc1" colspan="3">Coq Proof<br></th>
            </tr>
            <tr>
                <td class="tg-8fc1">Item</td>
                <td class="tg-8fc1">Description</td>
                <td class="tg-8fc1">Subitems</td>
                <td class="tg-8fc1">File</td>
                <td class="tg-8fc1">Name</td>
                <td class="tg-8fc1">Notation</td>
            </tr>
            <tr>
                <td class="tg-yw4l" rowspan="7">Figure 1<br></td>
                <td class="tg-yw4l" rowspan="7">DOT abstract syntax<br></td>
                <td class="tg-yw4l">variable</td>
                <td class="tg-yw4l" rowspan="7"><a href="doc/Definitions.html">Definitions.v</a></td>
                <td class="tg-rkwu">avar</td>
                <td class="tg-rkwu"></td>
            </tr>
            <tr>
                <td class="tg-yw4l">term member<br></td>
                <td class="tg-rkwu">trm_label</td>
                <td class="tg-rkwu"></td>
            </tr>
            <tr>
                <td class="tg-yw4l">type label<br></td>
                <td class="tg-rkwu">typ_label</td>
                <td class="tg-rkwu"></td>
            </tr>
            <tr>
                <td class="tg-yw4l">term</td>
                <td class="tg-rkwu">trm</td>
                <td class="tg-rkwu"></td>
            </tr>
            <tr>
                <td class="tg-yw4l">value</td>
                <td class="tg-rkwu">val</td>
                <td class="tg-rkwu"></td>
            </tr>
            <tr>
                <td class="tg-yw4l">definition</td>
                <td class="tg-rkwu">def</td>
                <td class="tg-rkwu"></td>
            </tr>
            <tr>
                <td class="tg-yw4l">type</td>
                <td class="tg-rkwu">typ</td>
                <td class="tg-rkwu"></td>
            </tr>
            <tr>
                <td class="tg-yw4l" rowspan="2">Figure 2<br></td>
                <td class="tg-yw4l" rowspan="2">Tight typing rules<br></td>
                <td class="tg-yw4l">term typing<br></td>
                <td class="tg-yw4l" rowspan="2"><a href="doc/Definitions.html">Definitions.v</a></td>
                <td class="tg-rkwu">ty_trm_t</td>
                <td class="tg-rkwu">G &vdash;<sub>&#35;</sub> t : T</td>
            </tr>
            <tr>
                <td class="tg-yw4l">subtyping<br></td>
                <td class="tg-rkwu">subtyp_t</td>
                <td class="tg-rkwu">G &vdash;<sub>&#35;</sub> T &lt;: U</td>
            </tr>
            <tr>
                <td class="tg-yw4l" rowspan="2">Figure 3<br></td>
                <td class="tg-yw4l" rowspan="2">Definition typing rules<br></td>
                <td class="tg-yw4l" rowspan="2"></td>
                <td class="tg-yw4l" rowspan="2"><a href="doc/Definitions.html">Definitions.v</a></td>
                <td class="tg-rkwu">ty_def</td>
                <td class="tg-rkwu">G ⊢ d : D</td>
            </tr>
            <tr>
                <td class="tg-rkwu">ty_defs</td>
                <td class="tg-rkwu">G ⊢ ds :: T</td>
            </tr>
            <tr>
                <td class="tg-yw4l">Definition 3.1<br></td>
                <td class="tg-yw4l">Inert context<br></td>
                <td class="tg-yw4l"></td>
                <td class="tg-yw4l"><a href="doc/Definitions.html">Definitions.v</a></td>
                <td class="tg-rkwu">inert_typ</td>
                <td class="tg-rkwu"></td>
            </tr>
            <tr>
                <td class="tg-yw4l">Definition 3.2<br></td>
                <td class="tg-yw4l">Inert type<br></td>
                <td class="tg-yw4l"></td>
                <td class="tg-yw4l"><a href="doc/Definitions.html">Definitions.v</a></td>
                <td class="tg-rkwu">inert</td>
                <td class="tg-rkwu"></td>
            </tr>
            <tr>
                <td class="tg-yw4l">Figure 4<br></td>
                <td class="tg-yw4l">Precise typing rules<br></td>
                <td class="tg-yw4l"></td>
                <td class="tg-yw4l"><a href="doc/Definitions.html">Definitions.v</a></td>
                <td class="tg-rkwu">ty_trm_p</td>
                <td class="tg-rkwu">G &vdash;<sub>!</sub> t : T</td>
            </tr>
            <tr>
                <td class="tg-yw4l">Theorem 3.3<br></td>
                <td class="tg-yw4l">General-to-tight typing (⊢ to ⊢<sub>#</sub>)</td>
                <td class="tg-yw4l"></td>
                <td class="tg-yw4l"><a href="doc/General_to_tight.html">General_to_tight.v</a></td>
                <td class="tg-rkwu">general_to_tight</td>
                <td class="tg-rkwu"></td>
            </tr>
            <tr>
                <td class="tg-yw4l">Lemma 3.4<br></td>
                <td class="tg-yw4l">Sel-&lt;: replacement</td>
                <td class="tg-yw4l"></td>
                <td class="tg-yw4l"><a href="doc/General_to_tight.html">General_to_tight.v</a><br></td>
                <td class="tg-rkwu">sel_replacement</td>
                <td class="tg-rkwu"></td>
            </tr>
            <tr>
                <td class="tg-yw4l">Lemma 3.5<br></td>
                <td class="tg-yw4l">Sel-&lt;:# premise<br></td>
                <td class="tg-yw4l"></td>
                <td class="tg-yw4l"><a href="doc/General_to_tight.html">General_to_tight.v</a></td>
                <td class="tg-rkwu">sel_premise</td>
                <td class="tg-rkwu"></td>
            </tr>
            <tr>
                <td class="tg-yw4l" rowspan="2">Figure 5<br></td>
                <td class="tg-yw4l" rowspan="2">Invertible typing rules<br></td>
                <td class="tg-yw4l">for variables<br></td>
                <td class="tg-yw4l" rowspan="2"><a href="doc/Definitions.html">Definitions.v</a></td>
                <td class="tg-rkwu">ty_var_inv</td>
                <td class="tg-rkwu">G &vdash;<sub>&#35&#35</sub> x : T</td>
            </tr>
            <tr>
                <td class="tg-yw4l">for values<br></td>
                <td class="tg-rkwu">ty_var_inv</td>
                <td class="tg-rkwu">G &vdash;<sub>&#35&#35v</sub> v : T</td>
            </tr>
            <tr>
                <td class="tg-yw4l" rowspan="2">Theorem 3.6<br></td>
                <td class="tg-yw4l" rowspan="2">Tight-to-invertible typing (⊢<sub>#</sub> to ⊢<sub>##</sub>)</td>
                <td class="tg-yw4l">for variables<br></td>
                <td class="tg-yw4l" rowspan="2"><a href="doc/Invertible_typing.html">Invertible_typing.v</a></td>
                <td class="tg-rkwu">tight_to_invertible</td>
                <td class="tg-rkwu"></td>
            </tr>
            <tr>
                <td class="tg-yw4l">for values<br></td>
                <td class="tg-rkwu">tight_to_invertible_v</td>
                <td class="tg-rkwu"></td>
            </tr>
            <tr>
                <td class="tg-yw4l">Lemma 3.7<br></td>
                <td class="tg-yw4l">∀ to Γ(x)</td>
                <td class="tg-yw4l"></td>
                <td class="tg-yw4l"><a href="doc/Canonical_forms.v">Canonical_forms.v</a></td>
                <td class="tg-rkwu">var_typ_all_to_binds</td>
                <td class="tg-rkwu"></td>
            </tr>
            <tr>
                <td class="tg-yw4l">Lemma 3.8<br></td>
                <td class="tg-yw4l">∀ to λ</td>
                <td class="tg-yw4l"></td>
                <td class="tg-yw4l"><a href="doc/Canonical_forms.v">Canonical_forms.v</a></td>
                <td class="tg-rkwu">val_typ_all_to_lambda</td>
                <td class="tg-rkwu"></td>
            </tr>
            <tr>
                <td class="tg-yw4l">Lemma 3.9<br></td>
                <td class="tg-yw4l">μ to Γ(x)</td>
                <td class="tg-yw4l"></td>
                <td class="tg-yw4l"><a href="doc/Canonical_forms.v">Canonical_forms.v</a></td>
                <td class="tg-rkwu">var_typ_rcd_to_binds</td>
                <td class="tg-rkwu"></td>
            </tr>
            <tr>
                <td class="tg-yw4l">Lemma 3.10<br></td>
                <td class="tg-yw4l">μ to ν</td>
                <td class="tg-yw4l"></td>
                <td class="tg-yw4l"><a href="doc/Canonical_forms.v">Canonical_forms.v</a></td>
                <td class="tg-rkwu">val_mu_to_new</td>
                <td class="tg-rkwu"></td>
            </tr>
            <tr>
                <td class="tg-yw4l">Lemma 3.11<br></td>
                <td class="tg-yw4l">Narrowing</td>
                <td class="tg-yw4l"></td>
                <td class="tg-yw4l"><a href="doc/Narrowing.html">Narrowing.v</a></td>
                <td class="tg-rkwu">narrow_rules<br></td>
                <td class="tg-rkwu"></td>
            </tr>
            <tr>
                <td class="tg-yw4l">Figure 6<br></td>
                <td class="tg-yw4l">Operational semantics<br></td>
                <td class="tg-yw4l"></td>
                <td class="tg-yw4l"><a href="doc/Definitions.html">Definitions.v</a></td>
                <td class="tg-rkwu">red</td>
                <td class="tg-rkwu">e<sub>1</sub> / t<sub>1</sub> ↦ e<sub>2</sub> / t<sub>2</sub></td>
            </tr>
            <tr>
                <td class="tg-yw4l">Theorem 3.12<br></td>
                <td class="tg-yw4l">Soundness</td>
                <td class="tg-yw4l"></td>
                <td class="tg-yw4l"><a href="doc/Safety.html">Safety.v</a></td>
                <td class="tg-rkwu">safety</td>
                <td class="tg-rkwu"></td>
            </tr>
            <tr>
                <td class="tg-yw4l">Lemma 3.13<br></td>
                <td class="tg-yw4l">Precise value typing<br></td>
                <td class="tg-yw4l"></td>
                <td class="tg-yw4l"><a href="doc/Helper_lemmas.html">Helper_lemmas.v</a></td>
                <td class="tg-rkwu">val_typing</td>
                <td class="tg-rkwu"></td>
            </tr>
            <tr>
                <td class="tg-yw4l">Lemma 3.14<br></td>
                <td class="tg-yw4l">Substitution</td>
                <td class="tg-yw4l"></td>
                <td class="tg-yw4l"><a href="doc/Substitution.html">Substitution.v</a></td>
                <td class="tg-rkwu">subst_ty_trm</td>
                <td class="tg-rkwu"></td>
            </tr>
            <tr>
                <td class="tg-yw4l" rowspan="2">Figure 7<br></td>
                <td class="tg-yw4l" rowspan="2">DOT Type Rules<br></td>
                <td class="tg-yw4l">term typing<br></td>
                <td class="tg-yw4l" rowspan="2"><a href="doc/Definitions.html">Definitions.v</a></td>
                <td class="tg-rkwu">ty_trm</td>
                <td class="tg-rkwu">G ⊢ t : T</td>
            </tr>
            <tr>
                <td class="tg-yw4l">subtyping<br></td>
                <td class="tg-rkwu">subtyp</td>
                <td class="tg-rkwu">G ⊢ T &lt;: U</td>
            </tr>
        </table>
    </div>
    </div>

    </body>
</html>
